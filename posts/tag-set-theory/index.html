<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>Tags as Set Theory - Dustin Newman</title>
    
    <meta name="description" content="As a former Tumblr-er, there was nothing more frustrating about that site than the tagging system. Aside from the near-universal problem of &ldquo;this tag&rdquo; vs. &ldquo;thistag&rdquo; vs. &ldquo;This tag&rdquo; vs. ad infinitum, I have yet to see a tagging system that allows set theory operations. What if I want to see posts analyzing the parallels between Taylor Swift’s &ldquo;reputation&rdquo; and &ldquo;Lover&rdquo;? Sure, I can search &ldquo;reputation,&rdquo; but then I have to sift through mostly irrelevant details to find the hidden gems.">
    <meta name="author" content="">
    
    <link href="https://dustinnewman.me/style.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="https://dustinnewman.me/apple-touch-icon.png">
    <link rel="icon" href="https://dustinnewman.me/favicon.ico">
    <meta name="generator" content="Hugo 0.83.1" />
    
    </head>
  <body class="single">
    <header class="header">
      <nav class="nav">
        <p class="logo"><a href="https://dustinnewman.me">Dustin Newman</a></p>
        <ul class="menu">
          <li>
            <a href="/posts">Posts</a>
          </li>
          <li>
            <a href="/projects">Projects</a>
          </li>
          <li>
            <a href="/recipes">Recipes</a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Tags as Set Theory</h1>
    <h2 class="post-subtitle">Let&#39;s play #</h2>
    <div class="post-meta">December 29, 2019</div>
  </header>
  <div class="post-content"><p>As a former Tumblr-er, there was nothing more frustrating about that site than the tagging system. Aside from the near-universal problem of &ldquo;this tag&rdquo; vs. &ldquo;thistag&rdquo; vs. &ldquo;This tag&rdquo; vs. ad infinitum, I have yet to see a tagging system that allows set theory operations. What if I want to see posts analyzing the parallels between Taylor Swift’s &ldquo;reputation&rdquo; and &ldquo;Lover&rdquo;? Sure, I can search &ldquo;reputation,&rdquo; but then I have to sift through mostly irrelevant details to find the hidden gems. What I really want is a way to say &ldquo;reputation ∩ Lover.&rdquo;</p>
<p>Going back to the &ldquo;this tag&rdquo; problem, imagine I&rsquo;m searching for posts about Star Wars. I want a way to search for &ldquo;star wars ∪ starwars ∪ Star Wars&rdquo; so that I can capture all posts no matter which tag they used. Or I want to see posts only about the 49th state, Alaska, and none about the drag queen of the same name. I need &ldquo;alaska \ rpdr.&rdquo;</p>
<p>Now that the motivation has been laid down, we need a more concrete syntax.</p>
<h2 id="syntax">Syntax</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#a6e22e">query</span> <span style="color:#f92672">=</span> <span style="color:#f92672">1*</span><span style="color:#a6e22e">expression</span>

<span style="color:#a6e22e">expression</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tag</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">expression</span>, <span style="color:#a6e22e">operator</span>, <span style="color:#a6e22e">expression</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">&#34;(&#34;</span> <span style="color:#a6e22e">expression</span> <span style="color:#ae81ff">&#34;)&#34;</span>

<span style="color:#a6e22e">tag</span> <span style="color:#f92672">=</span> <span style="color:#f92672">1*</span><span style="color:#66d9ef">VCHAR</span> <span style="color:#75715e">; except union, intersection, and difference</span>

<span style="color:#a6e22e">operator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">union</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">intersection</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">difference</span>

<span style="color:#a6e22e">union</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">&#34;||&#34;</span>

<span style="color:#a6e22e">intersection</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">&#34;&amp;&amp;&#34;</span>

<span style="color:#a6e22e">difference</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">&#34;\\&#34;</span>
</code></pre></div><p>Some example queries:</p>
<pre><code>reputation &amp;&amp; lover

starwars || star wars || Star Wars

alaska \\ rpdr
</code></pre><p>With the exception of pissing off some programmers, I don’t think this grammar is too restrictive. Tags can include any characters except those representing union, intersection, and difference operations, which don’t seem to be fairly common. Of course, the specifics can always be changed in a real world scenario.</p>
<p>Speaking of the real world usage, the above example queries in URL encoding would be:</p>
<pre><code>reputation%26%26lover

starwars%7C%7Cstar%20wars%7C%7CStar%20Wars

alaska%5C%5Crpdr
</code></pre><p>Particularly observant readers will note that my ABNF grammar permits use of parentheses. Although both union and intersection operations are associative, difference is not and I used parentheses to allow precedence in queries using difference. What if I want to view all posts with JUST cats? I don’t want to see any puppy dog eyes on my screen whatsoever!</p>
<pre><code>cats \\ dogs ; just cats
dogs \\ cats ; just dogs
dogs \\ (cats \\ cute) ; all dogs of any cuteness and only cats that aren't ugly
(dogs \\ cats) \\ cute ; all dogs that aren’t cute
</code></pre><p>As you can see, there is a lot more nuance here than is typically captured by tagging systems. It also offers a lot more complex queries without requiring exponentially complex tagging. In practice, assuming a normalized database, these queries don’t seem to be adding too much complexity beyond the standard “get all posts of a certain tag” query. This is because relational database management systems themselves draw from set theory to ground most of their operation.</p>
</div>
</article></main>
<footer class="footer">
  <span>&copy; 2021 <a href="https://dustinnewman.me">Dustin Newman</a></span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
  <span>&middot;</span>
  <span>Theme️ <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper</a></span>
</footer>
</body>
</html>

